{% if tools is defined %}
<tool_call_instruction>
<tool_call_formatting>
If you need to use a tool, you must format your message in the following way:
{{ tool_call_parser.tool_call_start }}
{{ tool_call_parser.tool_name_start }}tool_name{{ tool_call_parser.tool_name_end }}
{{ tool_call_parser.tool_params_start }}
{
  "parameter name": "parameter value"
}
{{ tool_call_parser.tool_params_end }}
{{ tool_call_parser.tool_call_end }}
</tool_call_formatting>

<tool_namespace>
{% for tool in tools %}
## {{ loop.index }}. {{ tool.name }}
def {{ tool.name }}(
    {% for param_name, param_schema in tool.function.parameters.properties.items() %}
    {{ param_name }}: {{ param_schema.type }}{{ "," if not loop.last else "" }}
    {% endfor %}
) -> str:
    """{{ tool.function.description }}

    Parameters:
    {% for param_name, param_schema in tool.function.parameters.properties.items() %}
    - {{ param_name }}: {{ "(required)" if param_name in tool.function.parameters.required else "(optional)" }} {{ param_schema.description }}{{ " default is " ~ param_schema.default if param_schema.default is defined else "" }}
    {% endfor %}

    {% if tool.function.examples %}
    Examples:
    {% for example_name, example in tool.function.examples.items() %}
    - {{ example_name }}: {{ example }}
    {% endfor %}
    {% endif %}
    """
    ...

{% endfor %}
</tool_namespace>
</tool_call_instruction>
{% endif %}