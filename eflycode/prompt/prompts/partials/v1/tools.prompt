{% if tools is defined %}
<tool_call_formatting>
If you need to use a tool, you must format your message in the following way:
{{ stream_parser.tool_call_start }}
{{ stream_parser.tool_name_start }}tool_name{{ stream_parser.tool_name_end }}
{{ stream_parser.tool_params_start }}
{
  "parameter name": "parameter value"
}
{{ stream_parser.tool_params_end }}
{{ stream_parser.tool_call_end }}
</tool_call_formatting>

<tool_namespace>
{% for tool_name, tool in tools.items() %}
## {{ loop.index }}. {{ tool_name }}
def {{ tool_name }}(
    {% for param_name, param_schema in tool.parameters.items() %}
    {{ param_name }}: {{ param_schema.type }}{{ "," if not loop.last else "" }}
    {% endfor %}
) -> str:
    """{{ tool.description }}

    Parameters:
    {% for param_name, param_schema in tool.parameters.items() %}
    - {{ param_name }}: {{ "(required)" if param_schema.required else "(optional)" }} {{ param_schema.description }}{{ " default is " ~ param_schema.default if param_schema.default is defined else "" }}
    {% endfor %}

    {% if tool.examples %}
    Examples:
    {% for example_name, example in tool.examples.items() %}
    - {{ example_name }}: {{ example }}
    {% endfor %}
    {% endif %}
    """
    ...

{% endfor %}
</tool_namespace>
{% endif %}